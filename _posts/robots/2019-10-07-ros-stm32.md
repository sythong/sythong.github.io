---
layout: post
title: Hướng dẫn cài đặt CUBEMX tren ubuntu và viết chương trình c++ trên keilC
author: Thong Ho
date: '2019-10-07 20:55:23 +0530'
categories: Ros-and-Robot
summary: Hướng dẫn kết nối với ros
thumbnail: kalman2.png
permalink: /:categories/stm32-cpp
use_math: true
---

## Hướng dẫn cài đặt STM32CUBEMX on ubuntu
- b1: Tải stm32cubemx tại [link](https://www.st.com/en/development-tools/stm32cubemx.html)
- b2: Giải nén thư mục, sau đó vào thư mục cài đặt java file .exe bằng lệnh bên dưới, sau đó tiến hành click như cài đặt bên window
    ```
    java -jar SetupSTM32CubeMX-5.3.0.exe

    ```
- b3: Vào thư mục vừa mới cài đặt (home/STM32cubemx) sau đó gõ lệnh :
    ```
    java -jar STM32CubeMX

    ```
- Kết quả như hình vẽ :
    ![run stm32cubemx](/assets/img/robots/run_cubemx.png)


- Hướng dẫn theo the article : [here](https://weekly-geekly.github.io/articles/443022/index.html?fbclid=IwAR0lf5hpUhpsKvxx3-RvQqCig45K5iZb_khzFpCSn0G8u6L4WCd698EyVyE)
- Cài đặt ST-LINK cho linux ta cần cài đặt utility st-flash:
    ```
     $ sudo apt-get install cmake $ sudo apt-get install libusb-1.0.0 $ git clone github.com/texane/stlink.git $ cd stlink $ make release $ cd build/Release; sudo make install $ sudo ldconfig 

    ```
- Để sử dụng ST Link:
    - Kiểm tra ST-LINK Detection:
    ```
        st-info —probe 
    ```
    - kết của hiện ra hiện ra : 
    
    ```
     Found 1 stlink programmers serial: 563f7206513f52504832153f openocd: "\x56\x3f\x72\x06\x51\x3f\x52\x50\x48\x32\x15\x3f" flash: 262144 (pagesize: 2048) sram: 65536 chipid: 0x0414 descr: F1 High-density device 

    ```




- Tạo CUBEMX project và generate code sử dụng keilc
    
- Thêm cpp vào mục C/C++ trên keilC
    ![](/assets/img/robots/cpp-stm32.JPG)

- Thêm 2 hàm extern bên trong hàm main tại thư mục define:
    ```cpp
    /* USER CODE BEGIN PFP */

    extern void user_setup();
    extern void user_loop();

    /* USER CODE END PFP */
    ```

- Tạo 1 file user_main.cpp mới để viết chương trình c++ ở đây:
